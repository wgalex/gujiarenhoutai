{"version":3,"sources":["webpack:///src/views/pastList/pastList.vue","webpack:///./src/views/pastList/pastList.vue?a456","webpack:///./src/views/pastList/pastList.vue"],"names":["pastList_pastList","data","dialog","list","searchList","magazine","typeList","type","position","keyword","stateList","name","user","role","setNumId","viewNum","created","this","_initData","JSON","parse","Object","auth","roleId","methods","outdata","magList","_searchState","_this","pastList","then","res","_setCarousel","id","_this2","$message","message","duration","_cancelCarousel","_this3","del","_this4","$confirm","confirmButtonText","cancelButtonText","catch","searchMagazine","val","_this5","newList","i","push","_searchDocument","_this6","_this7","itemList","length","editor","$router","query","goComment","pushDoc","text","_this8","word","errorlist","$alert","_text","addDoc","_this9","search","_this10","searchDocByword","_this11","openViewNum","e","saveNum","_this12","filters","formatDate","time","date","Date","js_date","stage","computed","outUrl","views_pastList_pastList","render","_vm","_h","$createElement","_c","_self","staticStyle","margin","font-size","_v","min-width","attrs","width","value-key","filterable","filter-method","placeholder","size","on","change","model","value","callback","$$v","expression","_l","item","key","label","_e","padding","display","line-height","margin-right","click","href","download","border","align","prop","scopedSlots","_u","fn","scope","_s","_f","row","$event","clientApp","isCarousel","commentNum","pageViewNum","title","visible","append-to-body","update:visible","staticClass","slot","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/31.9f19a51143729ed09f3f.js","sourcesContent":["<template>\r\n  <div>\r\n    <h1 style=\"margin: 10px 0; font-size: 24px\" >资讯列表</h1>\r\n    <el-row style=\"margin: 15px; min-width: 1000px;\" type=\"flex\">\r\n      <el-col style=\"width: 270px\" >\r\n        <span>期刊号：</span>\r\n        <el-select \r\n          v-model=\"magazine\"\r\n          @change=\"searchMagazine\"\r\n          value-key=\"name\" \r\n          filterable \r\n          :filter-method=\"search\"\r\n          placeholder=\"请选择期刊号\" \r\n          size=\"mini\" >\r\n          <el-option\r\n            v-for=\"item in searchList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-col>\r\n      <el-col style=\"width: 320px\" >\r\n        <span>栏目：</span>\r\n        <el-select \r\n          v-model=\"type\"\r\n          @change=\"_searchDocument\"\r\n          filterable \r\n          placeholder=\"请选择栏目\" \r\n          size=\"mini\" >\r\n          <el-option\r\n            v-for=\"item in typeList\"\r\n            :key=\"item.id\"\r\n            :label=\"item.name\"\r\n            :value=\"item.id\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-col>\r\n      <el-col style=\"width: 220px\" v-if=\"role != 3\"  >\r\n        <span>状态：</span>\r\n        <el-select \r\n          style=\"width: 120px\"\r\n          v-model=\"position\"\r\n          @change=\"_searchState\"\r\n          filterable \r\n          placeholder=\"请选择状态\" \r\n          size=\"mini\" >\r\n          <el-option\r\n            v-for=\"item in stateList\"\r\n            :key=\"item.position\"\r\n            :label=\"item.name\"\r\n            :value=\"item.position\">\r\n          </el-option>\r\n        </el-select>\r\n      </el-col>\r\n    </el-row>\r\n    <div style=\"padding: 10px; display: flex; \" >\r\n      <span style=\"line-height: 28px; margin: 0 5px;\" >搜索文章：</span>\r\n      <el-input style=\"width: 200px; margin-right: 10px\" v-model=\"keyword\" size=\"mini\" ></el-input>\r\n      <el-button type=\"primary\" size=\"mini\" @click=\"searchDocByword\" >搜索</el-button>\r\n      <el-button type=\"primary\" size=\"mini\" >\r\n        <a :href=\"outUrl\" download=\"\" >导出</a>\r\n      </el-button>\r\n    </div>\r\n    <el-table\r\n      :data=\"list\"\r\n      border\r\n      style=\"width: 100%\">\r\n      <el-table-column\r\n        align=\"center\"\r\n        type=\"index\"\r\n        label=\"序号\"\r\n        width=\"50\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        align=\"center\"\r\n        prop=\"magazine\"\r\n        label=\"期刊号\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        align=\"center\"\r\n        prop=\"typeName\"\r\n        label=\"栏目\"\r\n        width=\"100\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        align=\"center\"\r\n        prop=\"name\"\r\n        label=\"标题\">\r\n      </el-table-column>\r\n      <el-table-column\r\n        align=\"center\"\r\n        label=\"状态\"\r\n        width=\"100\">\r\n        <template slot-scope=\"scope\">\r\n          <p>{{ scope.row.position | stage }}</p>\r\n        </template>\r\n      </el-table-column>\r\n\r\n      <el-table-column\r\n        align=\"center\"\r\n        label=\"操作\"\r\n        width=\"400\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <p v-if=\"role != 3\" >\r\n            <el-button size=\"mini\" type='primary' @click=\"pushDoc(scope.row.name)\" >单篇通知</el-button>\r\n            <template>\r\n              <el-button v-if=\"scope.row.clientApp == 0\" size=\"mini\" type='primary' @click=\"addDoc(scope.row.id)\" >单篇上线</el-button>\r\n              <el-button v-else size=\"mini\" type='primary' @click=\"addDoc(scope.row.id)\" >重新上线</el-button>\r\n            </template>\r\n            \r\n            <el-button v-if=\"scope.row.isCarousel == 1\" size=\"mini\" type='warning' @click=\"_cancelCarousel(scope.row.id)\" >取消轮播图</el-button>\r\n            <el-button v-else size=\"mini\" type='primary' @click=\"_setCarousel(scope.row.id)\" >设置成轮播图</el-button>\r\n          </p>\r\n          <p>\r\n            <template v-if=\"role != 3\" >\r\n              <!-- v-if=\"scope.row.commentAuditRequired == 1\" -->\r\n              <el-badge :value=\"scope.row.commentNum\"  style=\"margin-right: 15px\" >\r\n                <el-button size=\"mini\" type='primary'  @click=\"goComment(scope.row.id)\"  >评论管理</el-button>\r\n              </el-badge>\r\n              <el-badge :value=\"scope.row.pageViewNum\"  style=\"margin-right: 15px\" >\r\n                <el-button size=\"mini\" type='primary'  @click=\"openViewNum(scope.row.id)\"  >浏览管理</el-button>\r\n              </el-badge>\r\n            </template>\r\n            <el-button size=\"mini\" type='primary' @click=\"editor(scope.row.id)\" >编辑</el-button>\r\n            <el-button size=\"mini\" type='danger' @click=\"del(scope.row.id)\" >删除</el-button>\r\n          </p>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <el-dialog\r\n      title=\"浏览量设置\"\r\n      :visible.sync=\"dialog\"\r\n      :append-to-body=\"true\"\r\n      width=\"600px\"\r\n    >\r\n      <el-input v-model=\"viewNum\" ></el-input>\r\n      <span slot=\"footer\" class=\"dialog-footer\" >\r\n        <el-button @click=\"dialog = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveNum\">保存</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { searchDoc, workNotice, getDocumentAllList, getState, updateCarouse, getDocumentList, searchDocument, getTypeList, getTypeAuditList, deleteDocument } from '@/api/pastList'\r\nimport { formatDate } from '@/common/js/date'\r\nimport { getMagazinePage, oneDoc, search, out, addView } from '@/api/magList'\r\nimport { getToken } from '@/api/auth'\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialog: false,\r\n      list: null,\r\n      searchList: null,\r\n      magazine: '',\r\n      typeList: null,\r\n      type: null,\r\n      position: null,\r\n      keyword: '',\r\n      stateList: [\r\n        {\r\n          position: '0',\r\n          name: '草稿箱',\r\n        },\r\n        {\r\n          position: '2',\r\n          name: '上线资讯',\r\n        },\r\n        {\r\n          position: '4',\r\n          name: '回收站',\r\n        },\r\n      ],\r\n      user: '',\r\n      role: '',\r\n      setNumId: '',\r\n      viewNum: 0\r\n    }\r\n  },\r\n  created () {\r\n    this._initData()\r\n    this.user = JSON.parse(getToken())\r\n    this.role = this.user.roleId\r\n  },\r\n  methods: {\r\n    // 导出\r\n    outdata () {\r\n      out('《顾家人》2018年5月上半刊（总第135期）')\r\n    },\r\n    // 查找状态\r\n    _searchState (position) {\r\n      getState(this.magazine.name, this.type, position).then(res => {\r\n        this.list = res.data\r\n      })\r\n    },\r\n    // 轮播设置\r\n    _setCarousel (id) {\r\n      updateCarouse(id, 1).then(res => {\r\n        this.$message({\r\n          message: res.message,\r\n          type: 'success',\r\n          duration: 3 * 1000\r\n        })\r\n        this._initData()\r\n      })\r\n    },\r\n    _cancelCarousel (id) {\r\n      updateCarouse(id, 0).then(res => {\r\n        this.$message({\r\n          message: res.message,\r\n          type: 'success',\r\n          duration: 3 * 1000\r\n        })\r\n        this._initData()\r\n      })\r\n    },\r\n    // 删除\r\n    del (id) {\r\n      this.$confirm('即将删除期刊, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        deleteDocument(id).then(res => {\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n          this._initData()\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '已取消删除'\r\n        });          \r\n      });\r\n    },\r\n    // 查找期刊文章列表 查找栏目列表\r\n    searchMagazine (val) {\r\n      getDocumentList(val.name).then(res => {\r\n        this.list = res.data\r\n        // 权限筛选\r\n        let role = JSON.parse(getToken())\r\n        if (role.roleId == 3) {\r\n          let newList = []\r\n          for (let i in this.list) {\r\n            if (this.list[i].position == 0) {\r\n              newList.push(this.list[i])\r\n            }\r\n          }\r\n          this.list = newList\r\n        }\r\n        this.position = null\r\n        getTypeAuditList(val.name).then(res => {\r\n          this.typeList = res.data\r\n          this.type =  ''\r\n        })\r\n      })\r\n    },\r\n    // 按栏目查找文章\r\n    _searchDocument (val) {\r\n      searchDocument(this.magazine.name, val).then(res => {\r\n        this.list = res.data\r\n        // 权限筛选\r\n        let role = JSON.parse(getToken())\r\n        if (role.roleId == 3) {\r\n          let newList = []\r\n          for (let i in this.list) {\r\n            if (this.list[i].position == 0) {\r\n              newList.push(this.list[i])\r\n            }\r\n          }\r\n          this.list = newList\r\n        }\r\n      })\r\n    },\r\n    // 初始化列表\r\n    _initData () {\r\n      getMagazinePage(1).then(res => {\r\n        this.magazine = res.data.itemList[0]\r\n        this.searchList = res.data.itemList\r\n        getTypeAuditList(res.data.itemList[0].name).then(res => {\r\n          this.typeList = res.data\r\n          this.type =  ''\r\n        })\r\n        if (res.data.itemList.length) {\r\n          getDocumentList(res.data.itemList[0].name).then(res => {\r\n            this.list = res.data\r\n            // 权限筛选\r\n            let role = JSON.parse(getToken())\r\n            if (role.roleId == 3) {\r\n              let newList = []\r\n              for (let i in this.list) {\r\n                if (this.list[i].position == 0) {\r\n                  newList.push(this.list[i])\r\n                }\r\n              }\r\n              this.list = newList\r\n            }\r\n          })\r\n        }\r\n      })\r\n    },\r\n    editor (id) {\r\n      this.$router.push({\r\n        name: 'addNews',\r\n        query: {\r\n          id: id\r\n        }\r\n      })\r\n    },\r\n    goComment (id) {\r\n      this.$router.push({\r\n        name: 'commentList',\r\n        query: {\r\n          id: id\r\n        }\r\n      })\r\n    },\r\n    // 推送\r\n    pushDoc (text) {\r\n      this.$confirm('即将推送, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        let word = '《' +  text + '》'\r\n        workNotice(word, 1).then(res => {\r\n          ////////////////////////////////////////////\r\n          if (res.data.errorlist.length == 0) {\r\n            this.$alert('已推送至全部部门!', '提示', {\r\n              confirmButtonText: '确定',\r\n              type: 'warning'\r\n            })\r\n          } else {\r\n            let text = ''\r\n            for (let i in res.data.errorlist) {\r\n              let content = res.data.errorlist[i] + '，'\r\n              text += content\r\n            }\r\n            text = text + '以上部门未推送成功'\r\n            this.$alert(text, '提示', {\r\n              confirmButtonText: '确定',\r\n              type: 'warning'\r\n            })\r\n          }\r\n          /////////////////////////////////////////////\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消推送'\r\n        });          \r\n      });\r\n    },\r\n    // 单篇推送\r\n    addDoc (id) {\r\n      oneDoc(id).then(res => {\r\n        this._initData()\r\n        this.$message({\r\n          message: res.message,\r\n          type: 'success',\r\n          duration: 3 * 1000\r\n        })\r\n      })\r\n    },\r\n    // 查找\r\n    search (i) {\r\n      search(i).then(res => {\r\n        this.searchList = res.data.itemList\r\n      })\r\n    },\r\n    // \r\n    searchDocByword () {\r\n      searchDoc(this.keyword).then(res => {\r\n        this.list = res.data\r\n      })\r\n    },\r\n    // 打开浏览量设置对话框\r\n    openViewNum (e) {\r\n      this.dialog = true\r\n      this.setNumId = e\r\n    },\r\n    // 设置浏览量\r\n    saveNum () {\r\n      addView(this.setNumId, this.viewNum).then(res => {\r\n        this.dialog = false\r\n        this._initData()\r\n        this.$message({\r\n          message: res.message,\r\n          type: 'success',\r\n          duration: 3 * 1000\r\n        })\r\n        this.setNumId = '',\r\n        this.viewNum = 0\r\n      })\r\n    }\r\n  },\r\n  filters: {\r\n    // 时间日期过滤\r\n    formatDate (time) {\r\n      var date = new Date(time)\r\n      return formatDate(date, 'yyyy-MM-dd')\r\n    },\r\n    // 状态筛选\r\n    stage (i) {\r\n      if (i == 0) {\r\n        return '草稿箱'\r\n      }\r\n      if (i == 1) {\r\n        return '审批中'\r\n      }\r\n      if (i == 2) {\r\n        return '上线'\r\n      }\r\n      if (i == 3) {\r\n        return '下线'\r\n      }\r\n      if (i == 4) {\r\n        return '回收站'\r\n      }\r\n    }\r\n\r\n  },\r\n  // watch: {\r\n  //   magazine () {\r\n  //     console.log(this.magazine)\r\n  //   }\r\n  // }\r\n  computed: {\r\n    outUrl () {\r\n      let url = '/kukacms/visitor/exportExcel.htm?magazine=' + this.magazine.name\r\n      // let url = '/kukacms/visitor/exportExcel.htm?magazine=《顾家人》2018年5月上半刊（总第135期）'\r\n      return url\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  a {\r\n    text-decoration: none;\r\n    color: #fff;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/pastList/pastList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',{staticStyle:{\"margin\":\"10px 0\",\"font-size\":\"24px\"}},[_vm._v(\"资讯列表\")]),_vm._v(\" \"),_c('el-row',{staticStyle:{\"margin\":\"15px\",\"min-width\":\"1000px\"},attrs:{\"type\":\"flex\"}},[_c('el-col',{staticStyle:{\"width\":\"270px\"}},[_c('span',[_vm._v(\"期刊号：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"value-key\":\"name\",\"filterable\":\"\",\"filter-method\":_vm.search,\"placeholder\":\"请选择期刊号\",\"size\":\"mini\"},on:{\"change\":_vm.searchMagazine},model:{value:(_vm.magazine),callback:function ($$v) {_vm.magazine=$$v},expression:\"magazine\"}},_vm._l((_vm.searchList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item}})}),1)],1),_vm._v(\" \"),_c('el-col',{staticStyle:{\"width\":\"320px\"}},[_c('span',[_vm._v(\"栏目：\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"filterable\":\"\",\"placeholder\":\"请选择栏目\",\"size\":\"mini\"},on:{\"change\":_vm._searchDocument},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}},_vm._l((_vm.typeList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_vm._v(\" \"),(_vm.role != 3)?_c('el-col',{staticStyle:{\"width\":\"220px\"}},[_c('span',[_vm._v(\"状态：\")]),_vm._v(\" \"),_c('el-select',{staticStyle:{\"width\":\"120px\"},attrs:{\"filterable\":\"\",\"placeholder\":\"请选择状态\",\"size\":\"mini\"},on:{\"change\":_vm._searchState},model:{value:(_vm.position),callback:function ($$v) {_vm.position=$$v},expression:\"position\"}},_vm._l((_vm.stateList),function(item){return _c('el-option',{key:item.position,attrs:{\"label\":item.name,\"value\":item.position}})}),1)],1):_vm._e()],1),_vm._v(\" \"),_c('div',{staticStyle:{\"padding\":\"10px\",\"display\":\"flex\"}},[_c('span',{staticStyle:{\"line-height\":\"28px\",\"margin\":\"0 5px\"}},[_vm._v(\"搜索文章：\")]),_vm._v(\" \"),_c('el-input',{staticStyle:{\"width\":\"200px\",\"margin-right\":\"10px\"},attrs:{\"size\":\"mini\"},model:{value:(_vm.keyword),callback:function ($$v) {_vm.keyword=$$v},expression:\"keyword\"}}),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.searchDocByword}},[_vm._v(\"搜索\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"}},[_c('a',{attrs:{\"href\":_vm.outUrl,\"download\":\"\"}},[_vm._v(\"导出\")])])],1),_vm._v(\" \"),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.list,\"border\":\"\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"index\",\"label\":\"序号\",\"width\":\"50\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"magazine\",\"label\":\"期刊号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"typeName\",\"label\":\"栏目\",\"width\":\"100\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"name\",\"label\":\"标题\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"状态\",\"width\":\"100\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('p',[_vm._v(_vm._s(_vm._f(\"stage\")(scope.row.position)))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\",\"width\":\"400\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(_vm.role != 3)?_c('p',[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.pushDoc(scope.row.name)}}},[_vm._v(\"单篇通知\")]),_vm._v(\" \"),[(scope.row.clientApp == 0)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addDoc(scope.row.id)}}},[_vm._v(\"单篇上线\")]):_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addDoc(scope.row.id)}}},[_vm._v(\"重新上线\")])],_vm._v(\" \"),(scope.row.isCarousel == 1)?_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"warning\"},on:{\"click\":function($event){return _vm._cancelCarousel(scope.row.id)}}},[_vm._v(\"取消轮播图\")]):_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm._setCarousel(scope.row.id)}}},[_vm._v(\"设置成轮播图\")])],2):_vm._e(),_vm._v(\" \"),_c('p',[(_vm.role != 3)?[_c('el-badge',{staticStyle:{\"margin-right\":\"15px\"},attrs:{\"value\":scope.row.commentNum}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.goComment(scope.row.id)}}},[_vm._v(\"评论管理\")])],1),_vm._v(\" \"),_c('el-badge',{staticStyle:{\"margin-right\":\"15px\"},attrs:{\"value\":scope.row.pageViewNum}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.openViewNum(scope.row.id)}}},[_vm._v(\"浏览管理\")])],1)]:_vm._e(),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.editor(scope.row.id)}}},[_vm._v(\"编辑\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.del(scope.row.id)}}},[_vm._v(\"删除\")])],2)]}}])})],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"浏览量设置\",\"visible\":_vm.dialog,\"append-to-body\":true,\"width\":\"600px\"},on:{\"update:visible\":function($event){_vm.dialog=$event}}},[_c('el-input',{model:{value:(_vm.viewNum),callback:function ($$v) {_vm.viewNum=$$v},expression:\"viewNum\"}}),_vm._v(\" \"),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\"取 消\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveNum}},[_vm._v(\"保存\")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-3bfef602\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/pastList/pastList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3bfef602\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./pastList.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./pastList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./pastList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3bfef602\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./pastList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3bfef602\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/pastList/pastList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}