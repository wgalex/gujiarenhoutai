webpackJsonp([39],{XqpY:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("PE0f"),l=a("HNM5"),i=a("zOMd"),s=a.n(i);function o(t){return Object(l.a)({url:"/kukacms/getTypeAuditList.htm?magazine="+t,method:"get"})}var c=a("rHWf"),r={data:function(){return{list:null,dialog:!1,col:{name:"",visible:"1"},searchList:null,magazine:null,typeList:null,type:null,place_1:null,place_2:null}},created:function(){var t=this;Object(c.c)(1).then(function(e){t.searchList=e.data.itemList,o(e.data.itemList[0].name).then(function(e){t.list=e.data})})},methods:{edit:function(t){this.col=t,this.col.visible=this.col.visible.toString(),this.dialog=!0},saveEdit:function(){var t=this;(function(t){return Object(l.a)({url:"/kukacms/updateType.htm",method:"post",data:s.a.stringify(t)})})({id:this.col.id,visible:this.col.visible,name:this.col.name,strTime:this.col.strTime,tag:"",parentId:0}).then(function(e){t.$message({message:e.message,type:"success",duration:3e3}),t.dialog=!1,Object(c.c)(1).then(function(e){t.searchList=e.data.itemList,o(e.data.itemList[0].name).then(function(e){t.list=e.data})})})},del:function(t){var e=this;this.$confirm("即将删除栏目, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(function(t){return Object(l.a)({url:"/kukacms/deleteType.htm?id="+t,method:"get"})})(t).then(function(t){e.$message({type:"success",message:"删除成功!"}),o("").then(function(t){e.list=t.data,console.log(t)})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},searchMagazine:function(t){var e=this;o(t.name).then(function(t){console.log(t.data),e.list=t.data})},_searchDocument:function(t){var e=this;Object(n.i)(this.magazine.name,t).then(function(t){e.list=t.data})},change:function(t){this.place_1?(this.place_2=t,console.log(this.place_1+","+this.place_2),this.place_1=null,this.place_2=null,console.log(this.place_1+","+this.place_2)):this.place_1=t}},filters:{formatDate:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){var e=new Date(t);return formatDate(e,"yyyy-MM-dd")}),isVisible:function(t){return 0==t?"隐藏":"显示"},stage:function(t){return 0==t?"保存":1==t?"在审批":2==t?"已上线":9==t?"审批未通过":void 0}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticStyle:{margin:"20px 0","font-size":"24px"}},[t._v("栏目列表")]),t._v(" "),a("el-row",{staticStyle:{margin:"15px"},attrs:{type:"flex"}},[a("el-col",{staticStyle:{width:"270px"}},[a("span",[t._v("期刊号：")]),t._v(" "),a("el-select",{attrs:{"value-key":"name",filterable:"",placeholder:"请选择期刊号",size:"mini"},on:{change:t.searchMagazine},model:{value:t.magazine,callback:function(e){t.magazine=e},expression:"magazine"}},t._l(t.searchList,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t}})}),1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"时间",prop:"strTime"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"mname",label:"期刊"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"栏目名称"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("stage")(e.row.stage)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"是否显示"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("isVisible")(e.row.visible)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"栏目信息编辑",visible:t.dialog,"append-to-body":!0,width:"600px"},on:{"update:visible":function(e){t.dialog=e}}},[a("el-form",{attrs:{model:t.col,"label-width":"70px"}},[a("el-form-item",{attrs:{label:"栏目名称"}},[a("el-input",{model:{value:t.col.name,callback:function(e){t.$set(t.col,"name",e)},expression:"col.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"时间"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.col.strTime,callback:function(e){t.$set(t.col,"strTime",e)},expression:"col.strTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否显示"}},[a("el-radio-group",{model:{value:t.col.visible,callback:function(e){t.$set(t.col,"visible",e)},expression:"col.visible"}},[a("el-radio",{attrs:{label:"1"}},[t._v("上线")]),t._v(" "),a("el-radio",{attrs:{label:"0"}},[t._v("下线")])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var d=a("C7Lr")(r,u,!1,function(t){a("h75O")},"data-v-06441603",null);e.default=d.exports},h75O:function(t,e){}});
//# sourceMappingURL=39.06644cbc1137b81b0813.js.map