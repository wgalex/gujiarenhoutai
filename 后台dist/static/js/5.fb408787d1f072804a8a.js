webpackJsonp([5],{"3cXf":function(e,t,a){e.exports={default:a("pELq"),__esModule:!0}},IGob:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("3cXf"),r=a.n(i),o=a("HNM5"),s=a("zOMd"),d=a.n(s);var l={data:function(){return{defaultProps:{children:"children",label:"categoryName"},isLoadingTree:!1,treeList:[],dialog:!1,dialog1:!1,dialogImageUrl:"",dialogVisible:!1,disabled:!1,dialogVisible2:!1,dialogImageUrl2:"",radio:"2",userEdit:{categoryName:"",categoryCode:"",levelCode:"",departmentId:"",departmentName:"",orginCategoryCode:"",id:"",headPath:""},userAdd:{categoryName:"",categoryCode:"",levelCode:"",departmentId:"",departmentName:"",orginCategoryCode:"",headPath:""},selected0rginCategoryCode:"",selectedLevelCode:"",New0rginCategoryCode:"",NewLevelCode:"",addLevelFlag:0,maxLevel:"",rules:{categoryName:[{required:!0,message:"请输入部门或奖项",trigger:"blur"}]}}},created:function(){var e=this;Object(o.a)({url:"/kukacms/visitor/level/select.htm",method:"get"}).then(function(t){e.maxLevel=t.data.length})},mounted:function(){this.upData()},methods:{upData:function(){var e,t=this,a={};this.treeList=[],a.categoryName="",a.departmentId=localStorage.getItem("departmentId"),(e=a,Object(o.a)({url:"/kukacms/visitor/category/selectmerge.htm",method:"post",data:d.a.stringify(e)})).then(function(e){t.treeList.push(JSON.parse(r()(e.data))),t.isLoadingTree=!0})},append:function(e){this.userAdd.departmentName=localStorage.getItem("departmentName"),this.userAdd.departmentId=localStorage.getItem("departmentId"),this.userAdd.orginCategoryCode=e.categoryCode,this.dialog=!0},saveUser:function(){var e=this;this.$refs.userAdd.validate(function(t){if(!t)return!1;e.$refs.userAdd.validate(function(t){var a;(a=e.userAdd,Object(o.a)({url:"/kukacms/visitor/category/add.htm",method:"post",data:d.a.stringify(a)})).then(function(t){e.$message({type:"success",message:"保存成功!"}),setTimeout(function(){e.upData(),e.dialog=!1},500),e.userAdd.categoryName="",e.userAdd.categoryCode="",e.userAdd.levelCode="",e.userAdd.departmentId="",e.userAdd.departmentName="",e.userAdd.orginCategoryCode="",e.userAdd.headPath="",e.handlePictureCardPreview()})})})},treeoEdit:function(e){this.dialog1=!0,this.userEdit.categoryName=e.categoryName,this.userEdit.categoryCode=e.categoryCode,this.userEdit.levelCode=e.levelCode,this.userEdit.departmentName=localStorage.getItem("departmentName"),this.userEdit.departmentId=localStorage.getItem("departmentId"),this.userEdit.orginCategoryCode=e.orginCategoryCode,this.userEdit.id=e.id,this.userEdit.headPath=e.headPath},saveEditUser:function(){var e=this;this.$refs.userEdit.validate(function(t){if(!t)return!1;var a;(a=e.userEdit,Object(o.a)({url:"/kukacms/visitor/category/update.htm",method:"post",data:d.a.stringify(a)})).then(function(t){e.$message({type:"success",message:"修改成功!"})}),setTimeout(function(){e.upData(),e.dialog1=!1},500)})},jump:function(e){localStorage.setItem("catorObjsName",e.categoryName),localStorage.setItem("catorObjsCode",e.categoryCode),this.$router.push({name:"celebrityPersonManagementList",query:{catorObj:e}})},randomNum:function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}},renderContent:function(e,t){var a=this,i=t.node,r=t.data;t.store;return e("span",{class:"custom-tree-node"},[e("span",[i.label]),e("span",[e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.treeoEdit(r)}},style:"font-size: 14px;"},["修改"]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.append(r)}},style:"font-size: 14px;"},["新增"]),e("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(){return a.jump(r)}},style:"font-size: 14px;"},["名人列表"])])])},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handlePictureCardPreview2:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},handleSuccess2:function(e,t){console.log(e.data[1]),this.userEdit.headPath=e.data[1]},handleSuccess:function(e,t){console.log(e.data[1]),this.userAdd.headPath=e.data[1]},handleRemove:function(e,t){console.log(e,t),this.userAdd.headPath=""},handleRemove2:function(e,t){console.log(e,t),this.userEdit.headPath=""}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"custom-tree-container",staticStyle:{margin:"10px 200px"}},[a("div",{staticStyle:{width:"600px"}},[e.isLoadingTree?a("el-tree",{attrs:{data:e.treeList,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,props:e.defaultProps,"render-content":e.renderContent}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"新增",visible:e.dialog,"append-to-body":!0,width:"800px"},on:{"update:visible":function(t){e.dialog=t}}},[a("el-form",{ref:"userAdd",attrs:{model:e.userAdd,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"categoryName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.userAdd.categoryName,callback:function(t){e.$set(e.userAdd,"categoryName",t)},expression:"userAdd.categoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上传图片"}},[a("el-upload",{attrs:{action:"/kukacms/visitor/picUpload.htm?type=10","list-type":"picture-card","on-success":e.handleSuccess,"auto-upload":!0,name:"files","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),a("div",{staticStyle:{position:"absolute",width:"160px",height:"110px",border:"1px solid rgb(204, 204, 204)","background-color":"cyan",top:"0",left:"150px"}},[a("p",[e._v("上传图片规范:")]),e._v(" "),a("p",[e._v("700px x 700px")])])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveUser}},[e._v("保存")])],1)],1),e._v(" "),a("el-dialog",{staticStyle:{"text-align":"left"},attrs:{title:"修改",visible:e.dialog1,"append-to-body":!0,width:"800px"},on:{"update:visible":function(t){e.dialog1=t}}},[a("el-form",{ref:"userEdit",attrs:{model:e.userEdit,"label-width":"100px",rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"categoryName"}},[a("el-input",{attrs:{placeholder:""},model:{value:e.userEdit.categoryName,callback:function(t){e.$set(e.userEdit,"categoryName",t)},expression:"userEdit.categoryName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"现在图片"}},[a("img",{staticStyle:{width:"50px",height:"50px"},attrs:{src:e.userEdit.headPath,alt:""}})]),e._v(" "),a("el-form-item",{attrs:{label:"替换图片"}},[a("el-upload",{attrs:{action:"/kukacms/visitor/picUpload.htm?type=10","list-type":"picture-card","on-success":e.handleSuccess2,"auto-upload":!0,"on-preview":e.handlePictureCardPreview2,name:"files","on-remove":e.handleRemove2}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible2,size:"tiny"},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl2,alt:""}})]),e._v(" "),a("div",{staticStyle:{position:"absolute",width:"160px",height:"110px",border:"1px solid rgb(204, 204, 204)","background-color":"cyan",top:"0",left:"150px"}},[a("p",[e._v("上传图片规范:")]),e._v(" "),a("p",[e._v("700px x 700px")])])],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveEditUser}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(l,n,!1,function(e){a("J4Xz")},null,null);t.default=c.exports},J4Xz:function(e,t){},pELq:function(e,t,a){var i=a("xhIC"),r=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}}});
//# sourceMappingURL=5.fb408787d1f072804a8a.js.map