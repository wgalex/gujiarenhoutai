webpackJsonp([13],{"0HQP":function(t,e){},Erpf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("lbVi"),i=a("rVsN"),o=a.n(i);function r(t,e,a){if(1==t){var n=e;if(function(t){if("png"==t||"jpg"==t||"jpeg"==t||"gif"==t||"bmp"==t)return!0}(n.slice(n.lastIndexOf(".")+1).toLowerCase()))(function(t){return new o.a(function(e,a){var n=new Image;n.crossOrigin="Anonymous",n.src=t,n.onload=function(){var t=document.createElement("canvas");t.width=n.width,t.height=n.height;var a=t.getContext("2d");a.drawImage(n,0,0,n.width,n.height);var i=n.src.substring(n.src.lastIndexOf(".")+1).toLowerCase(),o=t.toDataURL("image/"+i),r={dataURL:o,type:"image/"+i,ext:i};e(r)}})})(n).then(function(t){var e=l(t);if("IE"==s())window.navigator.msSaveBlob(e,a+".jpg");else{var n=document.createElement("a");n.download=a,n.href=URL.createObjectURL(e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}});else{var i=document.createElement("a");i.download=a,i.href=n,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}}else{var r=l({dataURL:e.toDataURL("image/jpeg",1),type:"image/jpg",ext:"jpg"});if("IE"==s())window.navigator.msSaveBlob(r,a+".jpg");else{var c=document.createElement("a");c.download=a,c.href=URL.createObjectURL(r),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c)}}}function l(t){for(var e=t.dataURL.split(";base64,"),a=e[0].split(":")[1],n=window.atob(e[1]),i=n.length,o=new Uint8Array(i),r=0;r<i;r++)o[r]=n.charCodeAt(r);return new Blob([o],{type:a})}function s(){var t=navigator.userAgent;return t.indexOf("OPR")>-1?"Opera":t.indexOf("Firefox")>-1?"FF":t.indexOf("Trident")>-1?"IE":t.indexOf("Edge")>-1?"Edge":t.indexOf("Chrome")>-1?"Chrome":t.indexOf("Safari")>-1?"Safari":void 0}var c={data:function(){return{dialog:!1,list:[],keyword:"",member:null,name:null,avatar:null,total:0}},created:function(){this.init()},computed:{url:function(){return"/kukacms/visitor/picUpload.htm?type=2&time="+Date.parse(new Date)}},methods:{init:function(){this.keyword="",this.getCodeList(1)},getCodeList:function(t){var e=this;Object(n.l)(t).then(function(t){e.list=t.data.itemList,e.total=t.data.totalRecord})},addCode:function(){var t=this;Object(n.c)(this.member,this.name,this.avatar).then(function(e){t.member=null,t.name=null,t.avatar=null,t.dialog=!1,t.init(),t.$message({message:e.message,type:"success",duration:3e3})})},delCode:function(t){var e=this;this.$confirm("是否确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.f)(t).then(function(t){e.init(),e.$message({message:t.message,type:"success",duration:3e3})})}).catch(function(){e.$message({type:"info",message:"取消"})})},searchById:function(){var t=this;Object(n.m)(this.keyword).then(function(e){t.list=e.data.itemList,t.total=e.data.totalRecord})},download:function(t,e){r(1,t,e)},handleSuccess:function(t){console.log(t),this.avatar=t.data[1],this.$refs.upload.clearFiles()}},components:{}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",{staticStyle:{margin:"20px 0","font-size":"24px"}},[t._v("二维码管理")]),t._v(" "),a("el-row",{attrs:{type:"flex",justify:"space-between"}},[a("el-row",{attrs:{span:6}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入工号",size:"mini"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"mini"},on:{click:t.searchById},slot:"append"})],1),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.init}},[t._v("重置")])],1),t._v(" "),a("el-row",{attrs:{span:6}},[a("el-button",{staticStyle:{width:"96px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.dialog=!0}}},[t._v("新增二维码")])],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%","margin-top":"10px"},attrs:{data:t.list,border:"",size:"mini"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"member",label:"工号"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"名字"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"头像"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticClass:"qrcode",attrs:{src:t.row.avatar,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"二维码"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"right",trigger:"hover",content:"操作"}},[a("div",[a("div",[a("img",{attrs:{src:e.row.url,alt:""}})]),t._v(" "),a("p",{attrs:{align:"center"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.download(e.row.url,e.row.member)}}},[t._v("下载")])],1)]),t._v(" "),a("img",{staticClass:"qrcode",attrs:{slot:"reference",src:e.row.url,alt:""},slot:"reference"})])]}}])}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.delCode(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"},attrs:{type:"flex",justify:"end"}},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total},on:{"current-change":t.getCodeList}})],1),t._v(" "),a("el-dialog",{attrs:{title:"新增二维码",visible:t.dialog,"append-to-body":!0},on:{"update:visible":function(e){t.dialog=e}}},[a("el-input",{attrs:{placeholder:"请输入名字",size:"mini"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),a("el-input",{staticStyle:{"margin-top":"10px"},attrs:{type:"number",placeholder:"请输入工号",size:"mini"},model:{value:t.member,callback:function(e){t.member=e},expression:"member"}}),t._v(" "),a("img",{staticClass:"qrcode",staticStyle:{"margin-top":"10px"},attrs:{src:t.avatar,alt:""}}),t._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo mt",attrs:{name:"files",action:t.url,"on-success":t.handleSuccess,"show-file-list":!1,limit:1}},[a("el-button",{staticStyle:{width:"96px","margin-top":"10px"},attrs:{size:"mini",type:"primary"}},[t._v("上传头像")])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialog=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addCode}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var u=a("C7Lr")(c,d,!1,function(t){a("0HQP"),a("qWkU")},"data-v-129a7c50",null);e.default=u.exports},qWkU:function(t,e){}});
//# sourceMappingURL=13.0bd5f605b026dcb5a038.js.map