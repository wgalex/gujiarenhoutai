webpackJsonp([25],{G0BT:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("PE0f"),a=n("rHWf"),s={data:function(){return{list:null,dialog:!1,col:{name:"",id:"",strTime:""},searchList:null,magazine:null,typeList:null,type:null,page:1,max:""}},created:function(){var t=this;Object(a.c)(this.page).then(function(e){t.list=e.data.itemList,t.max=e.data.totalPage})},methods:{upPage:function(){var t=this;1!=this.page&&(this.page--,Object(a.c)(this.page).then(function(e){t.list=e.data.itemList}))},nextPage:function(){var t=this;this.page<this.max&&(this.page++,Object(a.c)(this.page).then(function(e){t.list=e.data.itemList}))},edit:function(t){console.log(t),this.col=t,this.dialog=!0},saveEdit:function(){var t=this,e={id:this.col.id,name:this.col.name,strTime:this.col.strTime};Object(a.h)(e).then(function(e){t.$message({message:e.message,type:"success",duration:3e3}),t.dialog=!1,Object(a.c)(t.page).then(function(e){t.list=e.data.itemList,t.max=e.data.totalPage})})},del:function(t){var e=this;this.$confirm("即将删除期刊, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(a.b)(t).then(function(t){e.$message({type:"success",message:"删除成功!"}),Object(a.c)(1).then(function(t){e.list=t.data.itemList})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},upMag:function(t,e){var n=this;Object(a.g)(t,e).then(function(t){Object(a.c)(1).then(function(t){n.list=t.data.itemList})})},pushDoc:function(t){var e=this;this.$confirm("即将推送, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var n=t;Object(i.k)(n,2).then(function(t){e.$message({type:"success",message:"已推送!"})})}).catch(function(){e.$message({type:"info",message:"取消推送"})})}}},o={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticStyle:{margin:"20px 0","font-size":"24px"}},[t._v("期刊列表")]),t._v(" "),n("el-row",{staticStyle:{"margin-bottom":"10px",float:"right"}},[n("el-col",[n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.upPage}},[t._v("上一页")]),t._v(" "),n("span",[t._v(t._s(t.page))]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.nextPage}},[t._v("下一页")])],1)],1),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list,border:""}},[n("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"50"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"时间",prop:"strTime"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",prop:"name",label:"期刊"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.status?n("span",[t._v("已上线")]):n("span",{staticStyle:{color:"red"}},[t._v("未上线")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"操作",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.pushDoc(e.row.name)}}},[t._v("整期通知")]),t._v(" "),2!=e.row.status?n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.upMag(e.row.id,e.row.name)}}},[t._v("整期上线")]):n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.upMag(e.row.id,e.row.name)}}},[t._v("重新上线")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return t.edit(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(n){return t.del(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),n("el-dialog",{attrs:{title:"期刊信息编辑",visible:t.dialog,"append-to-body":!0,width:"600px"},on:{"update:visible":function(e){t.dialog=e}}},[n("el-form",{attrs:{model:t.col,"label-width":"70px"}},[n("el-form-item",{attrs:{label:"期刊名称"}},[n("el-input",{model:{value:t.col.name,callback:function(e){t.$set(t.col,"name",e)},expression:"col.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"时间"}},[n("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期"},model:{value:t.col.strTime,callback:function(e){t.$set(t.col,"strTime",e)},expression:"col.strTime"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialog=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.saveEdit}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var l=n("C7Lr")(s,o,!1,function(t){n("Tq6N")},"data-v-6ae17a6e",null);e.default=l.exports},Tq6N:function(t,e){}});
//# sourceMappingURL=25.e7cfd41d6cfc1234183e.js.map