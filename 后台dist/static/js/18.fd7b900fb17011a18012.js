webpackJsonp([18],{"0I55":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("91rg"),s=a("HNM5");var r=a("PE0f"),l=a("fjIZ"),i={data:function(){return{news:{id:"",name:"",keywords:"",source:"",magazine:"",typeFullPath:"",contentType:"0",clients:"a",summary:"",advanceTime:"",commentAuditRequired:"0",commentMaxValue:5,commentAllowed:1,dianzanAllowed:0,typeId:""},rules:{name:[{required:!0,message:"请输入标题",trigger:"blur"}],magazine:[{required:!0,message:"请选择期刊",trigger:"change"}],typeId:[{required:!0,message:"请选择栏目",trigger:"change"}],contentType:[{required:!0,message:"请选择资讯类型",trigger:"blur"}],clients:[{required:!0,message:"请选择客户端",trigger:"blur"}],summary:[{required:!0,message:"请输入摘要",trigger:"blur"}],advanceTime:[{required:!0,message:"请选择发布时间",trigger:"change"}]},magazine:{name:"",id:""},searchList:null,typeList:null,type:null}},created:function(){var e=this;Object(r.c)().then(function(t){e.searchList=t.data.itemList}),this._getDocument()},methods:{onSubmit:function(){var e=this;console.log(this.news),this.$refs.newsform.validate(function(t){if(!t)return console.log("error"),!1;Object(n.a)(e.news).then(function(t){e.$message({message:t.message,type:"success",duration:3e3}),e.$router.back()})})},searchMagazine:function(e){var t=this;this.news.magazine=this.magazine.name,this.news.typeId="",Object(r.f)(e.id).then(function(e){t.typeList=e.data,t.type=null})},setType:function(e){this.news.typeFullPath=e.name,this.news.typeId=e.id},formatDate:function(e){var t=new Date(e);return Object(l.a)(t,"MM/dd/yyyy")},_getDocument:function(){var e,t=this;(e=this.$route.params.id,Object(s.a)({url:"/kukacms/visitor/getDocumentById.htm?id="+e,method:"get"})).then(function(e){var a=e.data;t.news.id=a.id,t.news.name=a.name,t.news.keywords=a.keywords,t.news.source=a.source,t.news.magazine=a.magazine,t.news.typeFullPath=a.typeFullPath,t.news.typeId=a.typeId,t.news.contentType=e.data.contentType.toString(),t.news.clients=a.clients,t.news.summary=a.summary,t.news.advanceTime=t.formatDate(e.data.advanceTime),t.news.commentAuditRequired=e.data.commentAuditRequired.toString()})}},filters:{platform:function(e){return e.indexOf("w")>=0?"站点":e.indexOf("g")>=0?"公众号":e.indexOf("a")>=0?"APP":void 0}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"form-box"},[a("h1",{staticStyle:{margin:"20px 0","font-size":"24px"}},[e._v(e._s(e.news.name))]),e._v(" "),a("el-form",{ref:"newsform",staticStyle:{width:"800px"},attrs:{model:e.news,rules:e.rules,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"标题",prop:"name"}},[a("el-input",{model:{value:e.news.name,callback:function(t){e.$set(e.news,"name",t)},expression:"news.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"关键词"}},[a("el-input",{model:{value:e.news.keywords,callback:function(t){e.$set(e.news,"keywords",t)},expression:"news.keywords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"来源"}},[a("el-input",{model:{value:e.news.source,callback:function(t){e.$set(e.news,"source",t)},expression:"news.source"}})],1),e._v(" "),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"期刊"}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{prop:"magazine"}},[a("el-select",{attrs:{placeholder:"请选择期刊","value-key":"id"},on:{change:e.searchMagazine},model:{value:e.magazine,callback:function(t){e.magazine=t},expression:"magazine"}},e._l(e.searchList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{margin:"0 15px"},attrs:{span:2}},[e._v("\n        栏目\n      ")]),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{prop:"typeId"}},[a("el-select",{attrs:{"value-key":"id",placeholder:"请选择栏目"},on:{change:e.setType},model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"资讯类型",prop:"contentType"}},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:e.news.contentType,callback:function(t){e.$set(e.news,"contentType",t)},expression:"news.contentType"}},[a("el-option",{attrs:{label:"图文结合",value:"0"}}),e._v(" "),a("el-option",{attrs:{label:"图片资讯",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"视频资讯",value:"2"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"客户端",prop:"clients"}},[a("el-radio-group",{model:{value:e.news.clients,callback:function(t){e.$set(e.news,"clients",t)},expression:"news.clients"}},[a("el-radio",{attrs:{label:"w"}},[e._v("站点")]),e._v(" "),a("el-radio",{attrs:{label:"g"}},[e._v("公众号")]),e._v(" "),a("el-radio",{attrs:{label:"a"}},[e._v("APP")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"摘要",prop:"summary"}},[a("el-input",{model:{value:e.news.summary,callback:function(t){e.$set(e.news,"summary",t)},expression:"news.summary"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"预计发布时间",prop:"advanceTime"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"MM/dd/yyyy"},model:{value:e.news.advanceTime,callback:function(t){e.$set(e.news,"advanceTime",t)},expression:"news.advanceTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"评论设置"}},[a("el-radio-group",{model:{value:e.news.commentAuditRequired,callback:function(t){e.$set(e.news,"commentAuditRequired",t)},expression:"news.commentAuditRequired"}},[a("el-radio",{attrs:{label:"1"}},[e._v("审核")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("不审核")])],1)],1),e._v(" "),a("el-row",{attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success"},on:{click:e.onSubmit}},[e._v("保存")])],1)],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(i,o,!1,function(e){a("7Q0i")},"data-v-4701c760",null);t.default=c.exports},"7Q0i":function(e,t){},"91rg":function(e,t,a){"use strict";t.a=function(e){return Object(n.a)({url:"/kukacms/addDocument.htm",method:"post",data:r.a.stringify(e)})},t.b=function(e){return Object(n.a)({url:"/kukacms/getDocumentById.htm?id="+e,method:"get"})};var n=a("HNM5"),s=a("zOMd"),r=a.n(s)}});
//# sourceMappingURL=18.fd7b900fb17011a18012.js.map